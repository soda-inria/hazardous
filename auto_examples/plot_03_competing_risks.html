
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Exploring the accuracy in time &#8212; hazardous</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=932f07db" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=01f34227"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=fd10adb8"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'auto_examples/plot_03_competing_risks';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Getting the SEER dataset" href="../downloading_seer.html" />
    <link rel="prev" title="Estimating marginal cumulative incidence functions" href="plot_02_marginal_cumulative_incidence_estimation.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
  <aside class="bd-header-announcement d-print-none d-none" aria-label="Announcement" data-pst-announcement-url="https://raw.githubusercontent.com/soda-inria/hazardous/main/doc/announcement.html"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">hazardous</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api.html">
    API
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../downloading_seer.html">
    Getting the SEER dataset
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/soda-inria/hazardous/" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api.html">
    API
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../downloading_seer.html">
    Getting the SEER dataset
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/soda-inria/hazardous/" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="plot_01_survival_analysis.html">Survival analysis with SurvivalBoost</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot_02_marginal_cumulative_incidence_estimation.html">Estimating marginal cumulative incidence functions</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Exploring the accuracy in time</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Examples</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Exploring the accuracy in time</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#sphx-glr-download-auto-examples-plot-03-competing-risks-py"><span class="std std-ref">Go to the end</span></a>
to download the full example code.</p>
</div>
<section class="sphx-glr-example-title" id="exploring-the-accuracy-in-time">
<span id="sphx-glr-auto-examples-plot-03-competing-risks-py"></span><h1>Exploring the accuracy in time<a class="headerlink" href="#exploring-the-accuracy-in-time" title="Link to this heading">#</a></h1>
<p>In this notebook, we showcase how the accuracy in time metric is defined, behaves, and
how to interpret it.</p>
<section id="definition-of-the-accuracy-in-time">
<h2>Definition of the Accuracy in Time<a class="headerlink" href="#definition-of-the-accuracy-in-time" title="Link to this heading">#</a></h2>
<p>Here is a little bit of context about this metric introduced in
<a class="reference external" href="https://hal.science/hal-04617672v4">Alberge et al. (2024)</a>:</p>
<ul class="simple">
<li><p>The accuracy in time is a generalization of the accuracy metric in the survival
and the competing risks setting, representing the proportion of correctly
predicted labels at a fixed time.</p></li>
<li><p>This metric is computed for different user-provided time horizons, specified
either as direct timestamps or quantiles of the observed durations.</p></li>
<li><p>For a given patient at a fixed time, we compare the actual observed event to
the most likely predicted one. For example, imagine a patient who experiences
death due to cancer at time <span class="math notranslate nohighlight">\(t\)</span>. Before this time, the model should predict
with the highest probability that the patient will survive. After <span class="math notranslate nohighlight">\(t\)</span>,
the model should predict the cancer-related death event with the highest
probability. Censored patients are excluded from the computation after their
censoring time.</p></li>
<li><p>The mathematical formula is:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\mathrm{acc}(\zeta) = \frac{1}{n_{nc}} \sum_{i=1}^n ~ I\{\hat{y}_i=y_{i,\zeta}\}
   \overline{I\{\delta_i = 0 \cap t_i \leq \zeta \}}\]</div>
<p>where:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(I\)</span> is the indicator function.</p></li>
<li><p><span class="math notranslate nohighlight">\(\zeta\)</span> is a fixed time horizon.</p></li>
<li><p><span class="math notranslate nohighlight">\(n_{nc}\)</span> is the number of uncensored individuals at <span class="math notranslate nohighlight">\(\zeta\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(\delta_i\)</span> is the event experienced by the individual <span class="math notranslate nohighlight">\(i\)</span> at
<span class="math notranslate nohighlight">\(t_i\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(\hat{y} = \text{arg}\max\limits_{k \in [0, K]} \hat{F}_k(\zeta|X=x_i)\)</span>
where <span class="math notranslate nohighlight">\(\hat{F}_0(\zeta|X=x_i) \triangleq \hat{S}(\zeta|X=x_i)\)</span>.
<span class="math notranslate nohighlight">\(\hat{y}\)</span> is the most probable predicted event for individual <span class="math notranslate nohighlight">\(i\)</span>
at <span class="math notranslate nohighlight">\(\zeta\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(y_{i,\zeta} = \delta_i ~ I\{t_i \leq \zeta \}\)</span> is the observed event
for individual <span class="math notranslate nohighlight">\(i\)</span> at <span class="math notranslate nohighlight">\(\zeta\)</span>.</p></li>
</ul>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link to this heading">#</a></h2>
<section id="generating-synthetic-data">
<h3>Generating synthetic data<a class="headerlink" href="#generating-synthetic-data" title="Link to this heading">#</a></h3>
<p>We begin by generating a linear, synthetic dataset. For each individual, we uniformly
sample a shape and scale value, which we use to parameterize a Weibull distribution,
from which we sample a duration.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">hazardous.data</span><span class="w"> </span><span class="kn">import</span> <a href="../generated/hazardous.data.make_synthetic_competing_weibull.html#hazardous.data.make_synthetic_competing_weibull" title="hazardous.data.make_synthetic_competing_weibull" class="sphx-glr-backref-module-hazardous-data sphx-glr-backref-type-py-function"><span class="n">make_synthetic_competing_weibull</span></a>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.model_selection</span><span class="w"> </span><span class="kn">import</span> <a href="https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.train_test_split.html#sklearn.model_selection.train_test_split" title="sklearn.model_selection.train_test_split" class="sphx-glr-backref-module-sklearn-model_selection sphx-glr-backref-type-py-function"><span class="n">train_test_split</span></a>


<span class="n">X</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <a href="../generated/hazardous.data.make_synthetic_competing_weibull.html#hazardous.data.make_synthetic_competing_weibull" title="hazardous.data.make_synthetic_competing_weibull" class="sphx-glr-backref-module-hazardous-data sphx-glr-backref-type-py-function"><span class="n">make_synthetic_competing_weibull</span></a><span class="p">(</span><span class="n">n_events</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">n_samples</span><span class="o">=</span><span class="mi">10_000</span><span class="p">,</span> <span class="n">return_X_y</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <a href="https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.train_test_split.html#sklearn.model_selection.train_test_split" title="sklearn.model_selection.train_test_split" class="sphx-glr-backref-module-sklearn-model_selection sphx-glr-backref-type-py-function"><span class="n">train_test_split</span></a><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

<span class="n">X_train</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">y_train</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>((7500, 6), (7500, 2))
</pre></div>
</div>
<p>Next, we display the distribution of our target.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">matplotlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>


<span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span>
    <span class="n">y_test</span><span class="p">,</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;duration&quot;</span><span class="p">,</span>
    <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;event&quot;</span><span class="p">,</span>
    <span class="n">multiple</span><span class="o">=</span><span class="s2">&quot;stack&quot;</span><span class="p">,</span>
    <span class="n">palette</span><span class="o">=</span><span class="s2">&quot;colorblind&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img src="../_images/sphx_glr_plot_03_competing_risks_001.png" srcset="../_images/sphx_glr_plot_03_competing_risks_001.png" alt="plot 03 competing risks" class = "sphx-glr-single-img"/></section>
<section id="computing-the-accuracy-in-time">
<h3>Computing the Accuracy in Time<a class="headerlink" href="#computing-the-accuracy-in-time" title="Link to this heading">#</a></h3>
<p>After training <code class="docutils literal notranslate"><span class="pre">SurvivalBoost</span></code>, we compute its accuracy in time for 16 quantiles
of the time grid, i.e. at 16 evenly-spaced times of observation –<span class="math notranslate nohighlight">\(\zeta\)</span> in our
formula above.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hazardous</span><span class="w"> </span><span class="kn">import</span> <a href="../generated/hazardous.SurvivalBoost.html#hazardous.SurvivalBoost" title="hazardous.SurvivalBoost" class="sphx-glr-backref-module-hazardous sphx-glr-backref-type-py-class"><span class="n">SurvivalBoost</span></a>
<span class="kn">from</span><span class="w"> </span><span class="nn">hazardous.metrics</span><span class="w"> </span><span class="kn">import</span> <a href="../generated/hazardous.metrics.accuracy_in_time.html#hazardous.metrics.accuracy_in_time" title="hazardous.metrics.accuracy_in_time" class="sphx-glr-backref-module-hazardous-metrics sphx-glr-backref-type-py-function"><span class="n">accuracy_in_time</span></a>


<span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">time_grid</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4000</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<a href="../generated/hazardous.SurvivalBoost.html#hazardous.SurvivalBoost" title="hazardous.SurvivalBoost" class="sphx-glr-backref-module-hazardous sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">surv</span></a> <span class="o">=</span> <a href="../generated/hazardous.SurvivalBoost.html#hazardous.SurvivalBoost" title="hazardous.SurvivalBoost" class="sphx-glr-backref-module-hazardous sphx-glr-backref-type-py-class"><span class="n">SurvivalBoost</span></a><span class="p">(</span><span class="n">show_progressbar</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="n">y_pred</span> <span class="o">=</span> <a href="../generated/hazardous.SurvivalBoost.html#hazardous.SurvivalBoost.predict_cumulative_incidence" title="hazardous.SurvivalBoost.predict_cumulative_incidence" class="sphx-glr-backref-module-hazardous sphx-glr-backref-type-py-method"><span class="n">surv</span><span class="o">.</span><span class="n">predict_cumulative_incidence</span></a><span class="p">(</span><span class="n">X_test</span><span class="p">,</span> <span class="n">times</span><span class="o">=</span><span class="n">time_grid</span><span class="p">)</span>

<span class="n">quantiles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.125</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">accuracy</span><span class="p">,</span> <span class="n">taus</span> <span class="o">=</span> <a href="../generated/hazardous.metrics.accuracy_in_time.html#hazardous.metrics.accuracy_in_time" title="hazardous.metrics.accuracy_in_time" class="sphx-glr-backref-module-hazardous-metrics sphx-glr-backref-type-py-function"><span class="n">accuracy_in_time</span></a><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">time_grid</span><span class="p">,</span> <span class="n">quantiles</span><span class="o">=</span><span class="n">quantiles</span><span class="p">)</span>
<span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">model_name</span><span class="o">=</span><span class="s2">&quot;Survival Boost&quot;</span><span class="p">,</span> <span class="n">accuracy</span><span class="o">=</span><span class="n">accuracy</span><span class="p">,</span> <span class="n">taus</span><span class="o">=</span><span class="n">taus</span><span class="p">))</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.10.16/x64/lib/python3.10/site-packages/sklearn/utils/deprecation.py:151: FutureWarning: &#39;force_all_finite&#39; was renamed to &#39;ensure_all_finite&#39; in 1.6 and will be removed in 1.8.
  warnings.warn(
</pre></div>
</div>
<p>We also compute the accuracy in time of the Aalen-Johansen estimator, which is
a marginal model (it doesn’t use covariates X), similar to the Kaplan-Meier estimator,
except that it computes cumulative incidence functions of competing risks instead
of a survival function.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">scipy.interpolate</span><span class="w"> </span><span class="kn">import</span> <span class="n">interp1d</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">lifelines</span><span class="w"> </span><span class="kn">import</span> <span class="n">AalenJohansenFitter</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hazardous.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">check_y_survival</span>


<span class="k">def</span><span class="w"> </span><span class="nf">predict_aalen_johansen</span><span class="p">(</span><span class="n">y_train</span><span class="p">,</span> <span class="n">time_grid</span><span class="p">,</span> <span class="n">n_sample_test</span><span class="p">):</span>
    <span class="n">event</span><span class="p">,</span> <span class="n">duration</span> <span class="o">=</span> <span class="n">check_y_survival</span><span class="p">(</span><span class="n">y_train</span><span class="p">)</span>
    <span class="n">event_ids</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">event</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="mi">0</span><span class="p">]))</span>

    <span class="n">y_pred</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">event_id</span> <span class="ow">in</span> <span class="n">event_ids</span><span class="p">:</span>
        <span class="n">aj</span> <span class="o">=</span> <span class="n">AalenJohansenFitter</span><span class="p">(</span><span class="n">calculate_variance</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span>
            <span class="n">durations</span><span class="o">=</span><span class="n">duration</span><span class="p">,</span>
            <span class="n">event_observed</span><span class="o">=</span><span class="n">event</span><span class="p">,</span>
            <span class="n">event_of_interest</span><span class="o">=</span><span class="n">event_id</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">cif</span> <span class="o">=</span> <span class="n">aj</span><span class="o">.</span><span class="n">cumulative_density_</span>
        <span class="n">y_pred_</span> <span class="o">=</span> <span class="n">interp1d</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="n">cif</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
            <span class="n">y</span><span class="o">=</span><span class="n">cif</span><span class="p">[</span><span class="n">cif</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
            <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;linear&quot;</span><span class="p">,</span>
            <span class="n">fill_value</span><span class="o">=</span><span class="s2">&quot;extrapolate&quot;</span><span class="p">,</span>
        <span class="p">)(</span><span class="n">time_grid</span><span class="p">)</span>

        <span class="n">y_pred</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="c1"># shape: (n_sample_test, 1, n_time_steps)</span>
            <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">y_pred_</span><span class="p">,</span> <span class="p">(</span><span class="n">n_sample_test</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="p">)</span>

    <span class="n">y_survival</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">y_pred</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))[:,</span> <span class="kc">None</span><span class="p">,</span> <span class="p">:]</span>
    <span class="n">y_pred</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">y_survival</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">y_pred</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>


<span class="n">y_pred_aj</span> <span class="o">=</span> <span class="n">predict_aalen_johansen</span><span class="p">(</span><span class="n">y_train</span><span class="p">,</span> <span class="n">time_grid</span><span class="p">,</span> <span class="n">n_sample_test</span><span class="o">=</span><span class="n">X_test</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="n">accuracy</span><span class="p">,</span> <span class="n">taus</span> <span class="o">=</span> <a href="../generated/hazardous.metrics.accuracy_in_time.html#hazardous.metrics.accuracy_in_time" title="hazardous.metrics.accuracy_in_time" class="sphx-glr-backref-module-hazardous-metrics sphx-glr-backref-type-py-function"><span class="n">accuracy_in_time</span></a><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_aj</span><span class="p">,</span> <span class="n">time_grid</span><span class="p">,</span> <span class="n">quantiles</span><span class="o">=</span><span class="n">quantiles</span><span class="p">)</span>
<span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">model_name</span><span class="o">=</span><span class="s2">&quot;Aalan-Johansen&quot;</span><span class="p">,</span> <span class="n">accuracy</span><span class="o">=</span><span class="n">accuracy</span><span class="p">,</span> <span class="n">taus</span><span class="o">=</span><span class="n">taus</span><span class="p">))</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.10.16/x64/lib/python3.10/site-packages/lifelines/fitters/aalen_johansen_fitter.py:112: Warning: Tied event times were detected. The Aalen-Johansen estimator cannot handle tied event times.
                To resolve ties, data is randomly jittered.
  warnings.warn(
/opt/hostedtoolcache/Python/3.10.16/x64/lib/python3.10/site-packages/lifelines/fitters/aalen_johansen_fitter.py:112: Warning: Tied event times were detected. The Aalen-Johansen estimator cannot handle tied event times.
                To resolve ties, data is randomly jittered.
  warnings.warn(
/opt/hostedtoolcache/Python/3.10.16/x64/lib/python3.10/site-packages/lifelines/fitters/aalen_johansen_fitter.py:112: Warning: Tied event times were detected. The Aalen-Johansen estimator cannot handle tied event times.
                To resolve ties, data is randomly jittered.
  warnings.warn(
</pre></div>
</div>
</section>
<section id="results">
<h3>Results<a class="headerlink" href="#results" title="Link to this heading">#</a></h3>
<p>We display the accuracy in time to compare SurvivalBoost with the Aalen-Johansen’s
estimator. Higher is better.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>


<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">results</span><span class="p">)</span><span class="o">.</span><span class="n">explode</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;accuracy&quot;</span><span class="p">,</span> <span class="s2">&quot;taus&quot;</span><span class="p">])</span>

<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span>
    <span class="n">results</span><span class="p">,</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;taus&quot;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">&quot;accuracy&quot;</span><span class="p">,</span>
    <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;model_name&quot;</span><span class="p">,</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
    <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span>
    <span class="n">results</span><span class="p">,</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;taus&quot;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">&quot;accuracy&quot;</span><span class="p">,</span>
    <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;model_name&quot;</span><span class="p">,</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
    <span class="n">s</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
    <span class="n">zorder</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
    <span class="n">style</span><span class="o">=</span><span class="s2">&quot;model_name&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img src="../_images/sphx_glr_plot_03_competing_risks_002.png" srcset="../_images/sphx_glr_plot_03_competing_risks_002.png" alt="plot 03 competing risks" class = "sphx-glr-single-img"/><p>Note that the accuracy is high at very beginning
(<span class="math notranslate nohighlight">\(t &lt; 1000\)</span>), because both models predict that every individual survive, which
is true in most cases. Then, beyond the time horizon 1000, the discriminative power
of the conditional <code class="docutils literal notranslate"><span class="pre">SurvivalBoost</span></code> yields a better accuracy than the marginal,
unbiased, Aalen-Johansen’s estimator.</p>
</section>
<section id="understanding-the-accuracy-in-time">
<h3>Understanding the accuracy in time<a class="headerlink" href="#understanding-the-accuracy-in-time" title="Link to this heading">#</a></h3>
<p>We can drill into this metric by counting the observed events cumulatively across
time, and compare that to predictions.</p>
<p>We display below the distribution of ground truth labels. Each color bar group
represents the event distribution at some given time horizons.
Almost no individual have experienced an event at the very beginning (the very high
blue bars, corresponding to censoring).
Then, as time passes by, events occur and the number of censored individual at each
time horizon shrinks.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">plot_event_in_time</span><span class="p">(</span><span class="n">y_in_time</span><span class="p">,</span> <span class="n">title</span><span class="p">):</span>
    <span class="n">event_in_times</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">event_id</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
        <span class="n">event_in_times</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="nb">dict</span><span class="p">(</span>
                <span class="n">event_count</span><span class="o">=</span><span class="p">(</span><span class="n">y_in_time</span> <span class="o">==</span> <span class="n">event_id</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
                <span class="n">time_grid</span><span class="o">=</span><span class="n">time_grid</span><span class="p">,</span>
                <span class="n">event</span><span class="o">=</span><span class="n">event_id</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="n">event_in_times</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">event_in_times</span><span class="p">)</span><span class="o">.</span><span class="n">explode</span><span class="p">([</span><span class="s2">&quot;event_count&quot;</span><span class="p">,</span> <span class="s2">&quot;time_grid&quot;</span><span class="p">])</span>

    <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span>
        <span class="n">event_in_times</span><span class="p">,</span>
        <span class="n">x</span><span class="o">=</span><span class="s2">&quot;time_grid&quot;</span><span class="p">,</span>
        <span class="n">y</span><span class="o">=</span><span class="s2">&quot;event_count&quot;</span><span class="p">,</span>
        <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;event&quot;</span><span class="p">,</span>
        <span class="n">palette</span><span class="o">=</span><span class="s2">&quot;colorblind&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xticks</span><span class="p">()[::</span><span class="mi">10</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Time&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Total events at $t$&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>


<span class="n">time_grid_2d</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">time_grid</span><span class="p">,</span> <span class="p">(</span><span class="n">y_test</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">mask_event_happened</span> <span class="o">=</span> <span class="n">y_test</span><span class="p">[</span><span class="s2">&quot;duration&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[:,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">time_grid_2d</span>
<span class="n">y_test_class</span> <span class="o">=</span> <span class="n">mask_event_happened</span> <span class="o">*</span> <span class="n">y_test</span><span class="p">[</span><span class="s2">&quot;event&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[:,</span> <span class="kc">None</span><span class="p">]</span>

<span class="c1"># In the same fashion as the accuracy-in-time, we don&#39;t count individual that were</span>
<span class="c1"># censored in the past.</span>
<span class="n">mask_past_censoring</span> <span class="o">=</span> <span class="n">mask_event_happened</span> <span class="o">*</span> <span class="p">(</span><span class="n">y_test</span><span class="p">[</span><span class="s2">&quot;event&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">[:,</span> <span class="kc">None</span><span class="p">]</span>
<span class="n">y_test_class</span><span class="p">[</span><span class="n">mask_past_censoring</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

<span class="n">plot_event_in_time</span><span class="p">(</span><span class="n">y_test_class</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Ground truth&quot;</span><span class="p">)</span>
</pre></div>
</div>
<img src="../_images/sphx_glr_plot_03_competing_risks_003.png" srcset="../_images/sphx_glr_plot_03_competing_risks_003.png" alt="Ground truth" class = "sphx-glr-single-img"/><p>Now, we compare this ground truth to the classes predicted by <code class="docutils literal notranslate"><span class="pre">SurvivalBoost</span></code>.
Interestingly, it seems too confident about the censoring event at the
beginning (<span class="math notranslate nohighlight">\(t &lt; 500\)</span>), but then becomes underconfident in the middle
(<span class="math notranslate nohighlight">\(t &gt; 1500\)</span>) and very overconfident about the class 3 in the end
(<span class="math notranslate nohighlight">\(t &gt; 3000\)</span>).
Overall, we can see that the predicted labels gets closer to the ground truth as the
time progress, which correspond to the improvement of the accuracy in time
we saw for the large time horizons.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">y_pred_class</span> <span class="o">=</span> <span class="n">y_pred</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">y_pred_class</span><span class="p">[</span><span class="n">mask_past_censoring</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="n">plot_event_in_time</span><span class="p">(</span><span class="n">y_pred_class</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Survival Boost&quot;</span><span class="p">)</span>
</pre></div>
</div>
<img src="../_images/sphx_glr_plot_03_competing_risks_004.png" srcset="../_images/sphx_glr_plot_03_competing_risks_004.png" alt="Survival Boost" class = "sphx-glr-single-img"/><p>Finally, we show the predicted classes from the Aalen-Johansen model.
These predictions remain constant across all individuals, as the model is marginal,
and the global cumulative incidences are simply duplicated for each individual.
Once again, the changes in predicted labels align with the “bumps” observed in
the accuracy-over-time figure for the Aalen-Johansen model.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">y_pred_class_aj</span> <span class="o">=</span> <span class="n">y_pred_aj</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">y_pred_class_aj</span><span class="p">[</span><span class="n">mask_past_censoring</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="n">plot_event_in_time</span><span class="p">(</span><span class="n">y_pred_class_aj</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Aalen-Johansen&quot;</span><span class="p">)</span>
</pre></div>
</div>
<img src="../_images/sphx_glr_plot_03_competing_risks_005.png" srcset="../_images/sphx_glr_plot_03_competing_risks_005.png" alt="Aalen-Johansen" class = "sphx-glr-single-img"/><p class="sphx-glr-timing"><strong>Total running time of the script:</strong> (0 minutes 30.122 seconds)</p>
<div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-plot-03-competing-risks-py">
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../_downloads/2bac69c23aafe114787596f06d48dacd/plot_03_competing_risks.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_03_competing_risks.ipynb</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../_downloads/412912140cdc40c079f83f9fa8bde42a/plot_03_competing_risks.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_03_competing_risks.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-zip docutils container">
<p><a class="reference download internal" download="" href="../_downloads/80cb6593036fc68a57b7323802ebfed5/plot_03_competing_risks.zip"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">zipped:</span> <span class="pre">plot_03_competing_risks.zip</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="plot_02_marginal_cumulative_incidence_estimation.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Estimating marginal cumulative incidence functions</p>
      </div>
    </a>
    <a class="right-next"
       href="../downloading_seer.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Getting the SEER dataset</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#definition-of-the-accuracy-in-time">Definition of the Accuracy in Time</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#usage">Usage</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#generating-synthetic-data">Generating synthetic data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#computing-the-accuracy-in-time">Computing the Accuracy in Time</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#results">Results</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#understanding-the-accuracy-in-time">Understanding the accuracy in time</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/auto_examples/plot_03_competing_risks.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

  <div class="sidebar-secondary-item">


  <div class="sphx-glr-sidebar-component">
    
      
        <div class="sphx-glr-sidebar-item sphx-glr-download-python-sidebar" title="plot_03_competing_risks.py">
          <a download href="../_downloads/412912140cdc40c079f83f9fa8bde42a/plot_03_competing_risks.py">
            <i class="fa-solid fa-download"></i>
            Download source code
          </a>
        </div>
      
    
      
        <div class="sphx-glr-sidebar-item sphx-glr-download-jupyter-sidebar" title="plot_03_competing_risks.ipynb">
          <a download href="../_downloads/2bac69c23aafe114787596f06d48dacd/plot_03_competing_risks.ipynb">
            <i class="fa-solid fa-download"></i>
            Download Jupyter notebook
          </a>
        </div>
      
    
      
        <div class="sphx-glr-sidebar-item sphx-glr-download-zip-sidebar" title="plot_03_competing_risks.zip">
          <a download href="../_downloads/80cb6593036fc68a57b7323802ebfed5/plot_03_competing_risks.zip">
            <i class="fa-solid fa-download"></i>
            Download zipped
          </a>
        </div>
      
    
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2023, Olivier Grisel and Vincent Maladière.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>